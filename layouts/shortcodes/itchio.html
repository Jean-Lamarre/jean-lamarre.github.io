{{- if .IsNamedParams -}}
  {{- $.Scratch.Set "id"  (.Get "id") -}}
  {{- $.Scratch.Set "square" (.Get "square") -}}
  {{- $.Scratch.Set "linkback"  (.Get "linkback") -}}
  {{- $.Scratch.Set "dark"  (.Get "dark") -}}
{{- else -}}
  {{- $.Scratch.Set "id"  (.Get 0) -}}
  {{- $.Scratch.Set "square" (.Get 1) -}}
  {{- $.Scratch.Set "linkback"  (.Get 2) -}}
  {{- $.Scratch.Set "dark"  (.Get 3) -}}
{{- end -}}
{{- $.Scratch.Set "url" (printf "https://itch.io/embed/%s" ($.Scratch.Get "id")) -}}
{{- if (eq ($.Scratch.Get "linkback") "true") -}}
  {{- $.Scratch.Set "url" (printf "%s?linkback=true" ($.Scratch.Get "url")) -}}
{{- end -}}
{{- if (eq ($.Scratch.Get "dark") "true") -}}
  {{- if strings.HasSuffix ($.Scratch.Get "url") "?linkback=true" -}}
    {{- $.Scratch.Set "url" (printf "%s&dark=true" ($.Scratch.Get "url")) -}}
  {{- else -}}
    {{- $.Scratch.Set "url" (printf "%s?dark=true" ($.Scratch.Get "url")) -}}
  {{- end -}}
{{- end -}}
{{- if (eq ($.Scratch.Get "square") "true") -}}
  {{ $.Scratch.Set "width" "208"}}
{{- else -}}
  {{ $.Scratch.Set "width" "560"}}
{{- end -}}

<iframe frameborder="0"
        src="{{ $.Scratch.Get "url" }}&amp;border_width=5&amp;bg_color=222222&amp;fg_color=eeeeee&amp;link_color={{ (.Get "color") }}&amp;border_color={{ (.Get "color") }}"
        width="{{ $.Scratch.Get "width" }}"
        height="175"
        >
</iframe>
